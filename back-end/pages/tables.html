<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>WAFA Admin</title>

    <!-- Bootstrap Core CSS -->
    <link href="../vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- MetisMenu CSS -->
    <link href="../vendor/metisMenu/metisMenu.min.css" rel="stylesheet">

    <!-- DataTables CSS -->
    <link href="../vendor/datatables-plugins/dataTables.bootstrap.css" rel="stylesheet">
    <link href="../vendor/datatables/css/jquery.dataTables.min.css" rel="stylesheet">


    <!-- DataTables Responsive CSS -->
    <link href="../vendor/datatables-responsive/dataTables.responsive.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="../dist/css/sb-admin-2.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="../vendor/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>

<body>
    <div id="wrapper">

        <!-- Navigation -->
        <nav class="navbar navbar-default navbar-static-top" role="navigation" style="margin-bottom: 0">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="index.html">WAFA</a>
            </div>
            <!-- /.navbar-header -->

            <ul class="nav navbar-top-links navbar-right">
                
                <li class="dropdown">
                    <a class="dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="fa fa-user fa-fw"></i> <i class="fa fa-caret-down"></i>
                    </a>
                    <ul class="dropdown-menu dropdown-user">
                        
                        <li><a href="#"><i class="fa fa-gear fa-fw"></i> Settings</a>
                        </li>
                        <li class="divider"></li>
                        <li><a href="login.html"><i class="fa fa-sign-out fa-fw"></i> Logout</a>
                        </li>
                    </ul>
                    <!-- /.dropdown-user -->
                </li>
                <!-- /.dropdown -->
            </ul>
            <!-- /.navbar-top-links -->

            <div class="navbar-default sidebar" role="navigation">
                <div class="sidebar-nav navbar-collapse">
                    <ul class="nav" id="side-menu">
                        <li>
                            <a href="index.html"><i class="fa fa-dashboard fa-fw"></i> Dashboard</a>
                        </li>
						<li>
                            <a href="#"><i class="fa fa-th-list fa-fw"></i> Data Master <span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="data-barang.html"><i class="fa fa-table fa-fw"></i> Data Barang</a>
                                </li>
                                <li>
									<a href="data-supplier.html"><i class="fa fa-table fa-fw"></i> Data Supplier</a>
                                </li>
								<li>
									<a href="data-customer.html"><i class="fa fa-table fa-fw"></i> Data Customer</a>
                                </li>
								<li>
									<a href="data-ekspedisi.html"><i class="fa fa-table fa-fw"></i> Data Ekspedisi</a>
								</li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
						<li>
                            <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> Pembelian (Purchase)<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="tables.html"><i class="fa fa-table fa-fw"></i> Stok</a>
                                </li>
                                <li>
									<a href="purchase-order.html"><i class="fa fa-shopping-cart fa-fw"></i> Purchase Order</a>
                                </li>
								<li>
									<a href="penerimaan-barang.html"><i class="fa fa-check-circle-o fa-fw"></i> Penerimaan Barang</a>
                                </li>
								<li>
									<a href="pembayaran-po.html"><i class="fa fa-dollar fa-fw"></i> Pembayaran Purchase Order</a>
								</li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
						<li>
                            <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> Penjualan (Sales)<span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="daftar_pembayaran.html"><i class="fa fa-table fa-fw"></i> Daftar Pembayaran</a>
                                </li>
                                <li>
                                    <a href="penjualan.html"><i class="fa fa-shopping-cart fa-fw"></i> Permintaan Penjualan</a>
                                </li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
						<li>
                            <a href="#"><i class="fa fa-bar-chart-o fa-fw"></i> Laporan <span class="fa arrow"></span></a>
                            <ul class="nav nav-second-level">
                                <li>
                                    <a href="laporan-stok.html"><i class="fa fa-table fa-fw"></i> Laporan Stok</a>
                                </li>
                                <li>
									<a href="laporan-penjualan.html"><i class="fa fa-shopping-cart fa-fw"></i> Laporan Penjualan</a>
                                </li>
								<li>
									<a href="laporan-pembelian.html"><i class="fa fa-shopping-cart fa-fw"></i> Laporan Pembelian</a>
								</li>
								<li>
									<a href="laporan_perbarang.html"><i class="fa fa-briefcase fa-fw"></i> Laporan Per Barang</a>
								</li>
								<li>
									<a href="laporan_customer.html"><i class="fa fa-users   fa-fw"></i> Laporan Customer</a>
								</li>
								<li>
									<a href="laporan-hutang.html"><i class="fa fa-dollar fa-fw"></i> Laporan Piutang Penjualan</a>
								</li>
                            </ul>
                            <!-- /.nav-second-level -->
                        </li>
                        
                    </ul>
                </div>
                <!-- /.sidebar-collapse -->
            </div>
            <!-- /.navbar-static-side -->
        </nav>
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <div id="alert_message"></div>
                    <h1 class="page-header">Stok</h1>
                </div>
                <!-- /.col-lg-12 -->
            </div>
            <!-- /.row -->
            <div class="row">
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                            Data Stok
                        </div>
                        <!-- /.panel-heading -->
                        <div class="panel-body">
                            <div class="well">
                                <a class="btn btn-primary btn-lg" data-toggle="modal" data-target="#tambah_stok">Tambah Stok</a>
                            </div>
                            <table width="100%" class="table table-striped table-bordered table-hover dt-center" id="stok">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <th>Nama Barang</th>
                                        <th>Jumlah</th>
                                        <th>Batas Minimal</th>
                                    </tr>
                                </thead>
                            </table>
                            
                        </div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
            </div>
        </div>
        <!-- /#page-wrapper -->
    </div>
    <!-- /#Tambah Stok
     -->
	<div class="modal fade" id="tambah_stok" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Tambah Stok</h4>
                </div>
                <div class="modal-body">
    				<div class="card">
                        <div class="card-header" data-background-color="purple">
                            <h4 class="title">Masukkan Stok</h4>
                            <p class="category">Here is a subtitle for this table</p>
                        </div>
                        <div class="card-content table-responsive">
                            <table width="100%" class="table table-striped" id="daftar_tambah_stok">
                                <thead>
                                    <tr>
                                        <th>Aksi</th>
                                        <th>Nama Barang</th>
                                        <th>Jumlah</th>
                                        <th>Suplier</th>
                                    </tr>
                                </thead>
                                <tbody>
                                </tbody>
                            </table>
        					<button class="btn btn-primary" id="tambah">Tambah Barang</button>
                            <button class="btn btn-primary" id="simpan" data-dismiss="modal">Simpan</button>
                            <br><br><br>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- /#Tabel Barang -->
    <div class="modal fade" id="tambah_barang" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Nama Barang</h4>
                </div>
                <div class="modal-body">
    				<div class="card">
                        <div class="card-header" data-background-color="purple">
                            <h4 class="title">Tabel Barang</h4>
                            <p class="category">Masukkan Nama Barang</p>
                        </div>
                        <div class="card-content table-responsive">
                            <table width="100%" class="table table-striped table-bordered table-hover" id="tabel_barang">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <th>Nama Barang</th>
                                        <th>Berat</th>
                                    </tr>
                                </thead>
                            </table>
    						<button class="btn btn-primary"  data-dismiss="modal" id="simpan_barang">Simpan</button>
                            <br><br>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>

    <!-- /#Tabel Supplier -->
    <div class="modal fade" id="tambah_supplier" role="dialog">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <h4 class="modal-title">Nama Supplier</h4>
                </div>
                <div class="modal-body">
                    <div class="card">
                        <div class="card-header" data-background-color="purple">
                            <h4 class="title">Tabel Supplier</h4>
                            <p class="category">Masukkan Nama Supplier</p>
                        </div>
                        <div class="card-content table-responsive">
                            <table width="100%" class="table table-striped table-bordered table-hover" id="tabel_supplier">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <th>Suplier</th>
                                        <th>Alamat</th>
                                        <th>Kota</th>
                                    </tr>
                                </thead>
                            </table>
                            <button class="btn btn-primary"  data-dismiss="modal" id="simpan_supplier">Simpan</button>
                            <br><br>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    <!-- jQuery -->
    <script src="../vendor/jquery/jquery.min.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="../vendor/bootstrap/js/bootstrap.min.js"></script>

    <!-- Metis Menu Plugin JavaScript -->
    <script src="../vendor/metisMenu/metisMenu.min.js"></script>

    <!-- DataTables JavaScript -->
    <script src="../vendor/datatables/js/jquery.dataTables.min.js"></script>
    <script src="../vendor/datatables/js/dataTables.buttons.min.js"></script>
    <script src="../vendor/datatables/js/dataTables.select.min.js"></script>
    <script src="../vendor/datatables-plugins/dataTables.bootstrap.min.js"></script>
    <script src="../vendor/datatables-responsive/dataTables.responsive.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="../dist/js/sb-admin-2.js"></script>

    <!-- Page-Level Demo Scripts - Tables - Use for reference -->
    <script>
        var tabel_stok;
        var tabel_barang;
        var tabel_supplier;
        var i = 0;
        var editor;
        var temp;
    $(document).ready(function() {
        stok_data();
        barang_data();
        supplier_data();
        function stok_data()
          {
           tabel_stok = $('#stok').DataTable({
            responsive : true,
            "ajax" : {
             url:"data_stok.php",
             type:"POST"
            }

           });
          }

        function barang_data()
          {
           tabel_barang = $('#tabel_barang').DataTable({
            responsive : true,
            "ajax" : {
             url:"data_barang_stok.php",
             type:"POST"
            }
           });
          }

        function supplier_data()
          {
           tabel_supplier = $('#tabel_supplier').DataTable({
            responsive : true,
            "ajax" : {
             url:"data_supplier_stok.php",
             type:"POST"
            }
           });
          }

        function update_data(id, column_name, value)
          {
           $.ajax({
            url:"update_stok.php",
            method:"POST",
            data:{id:id, column_name:column_name, value:value},
            success:function(data)
            {
             $('#alert_message').html('<div class="alert alert-success"><p class="lead"> '+data+' <i class="fa fa-warning fa-1x"></i></p></div>');
             $('#stok').DataTable().destroy();
             stok_data();
            }
           });
           setInterval(function(){
            $('#alert_message').html('');
           }, 3000);
          }

        $(document).on('blur', '.update', function(){
           var id = $(this).data("id");
           var column_name = $(this).data("column");
           var value = $(this).text();
           update_data(id, column_name, value);
          });

        $('#tambah').click(function(){
            i++;
            var html = '<tr id="data'+i+'">';
            html += '<td><button type="button" class="btn btn-danger" onclick="$.fn.hapus('+i+');"><i class="fa fa-trash-o" ></i> Hapus</button></td>';
            html += '<td><div class="form-group input-group"><fieldset disabled><input type="text" class="form-control" id="input_barang'+i+'"></fieldset><span class="input-group-btn"><button class="btn btn-default" data-toggle="modal" data-target="#tambah_barang" onclick="$.fn.myFunction('+i+');"><i class="fa fa-search"></i></button></span></div></td>';
            html += '<td><div class="form-group"><input class="form-control" placeholder="Jumlah" id="jumlah'+i+'"></div></td>';
            html += '<td><div class="form-group input-group"><fieldset disabled><input type="text" class="form-control" id="input_supplier'+i+'"></fieldset><span class="input-group-btn"><button class="btn btn-default" data-toggle="modal" data-target="#tambah_supplier" onclick="$.fn.myFunction('+i+');"><i class="fa fa-search"></i></button></span></div></td>';
            html += '</tr>';
            $('#daftar_tambah_stok').prepend(html);
          });

        $('#tabel_barang').on( 'click', 'tbody tr', function () {
            if ( $(this).hasClass('selected') ) {
                $(this).removeClass('selected');
            }
            else {
                tabel_barang.$('tr.selected').removeClass('selected');
                $(this).addClass('selected');
            }
            editor = tabel_barang.row( this ).data();
            editor = editor[1]; 
        } );

        $("#simpan_barang").click(function(){
            tabel_barang.$('tr.selected').removeClass('selected');
            $("#input_barang"+temp).val(editor);
        });

        $('#tabel_supplier').on( 'click', 'tbody tr', function () {
            if ( $(this).hasClass('selected') ) {
                $(this).removeClass('selected');
            }
            else {
                tabel_supplier.$('tr.selected').removeClass('selected');
                $(this).addClass('selected');
            }
            editor = tabel_supplier.row( this ).data();
            editor = editor[1]; 
        } );

        $("#simpan_supplier").click(function(){
            tabel_supplier.$('tr.selected').removeClass('selected');
            $("#input_supplier"+temp).val(editor);
        });

        $("#simpan").click(function(){
            if(confirm("Apakah Anda Yakin Dengan Stok Yang Diminta?"))
           {
            $('#alert_message').html('<div class="alert alert-success"><p class="lead"> Permintaan Stok Telah Dikirim <i class="fa fa-warning fa-1x"></i></p></div>');
                    setInterval(function(){
                    $('#alert_message').html('');
                   }, 5000);
           }
        });

        $.fn.hapus = function(i){ 
            $('#data'+i).remove();
        }
        $.fn.myFunction = function(i){ 
            temp = i;
        }
    } );
   
    </script>

</body>

</html>
